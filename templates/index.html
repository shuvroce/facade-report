<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Report Generator</title>
    <link rel="icon" href="{{ url_for('static', filename='fav.png') }}" type="image/png">
    <!-- <link rel="stylesheet" href="/static/app.css"> -->
    <link rel="stylesheet" href="{{ url_for('static', filename='app.css') }}">
</head>

<body>
    <nav>
        <div class="nav_bar">
            <div class="tab_box">
                <button class="tab_btn active">
                    <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <circle cx="12" cy="12" r="9"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <circle cx="12" cy="16" r="1.2"></circle>
                    </svg>
                    <span class="tab-label">General</span>
                </button>
                <button class="tab_btn">
                    <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <line x1="5" y1="6" x2="19" y2="6"></line>
                        <line x1="5" y1="18" x2="19" y2="18"></line>
                        <line x1="12" y1="6" x2="12" y2="18"></line>
                    </svg>
                    <span class="tab-label">Profiles</span>
                </button>
                <button class="tab_btn">
                    <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M4 12c2.5-2 6.5-2 9 0s6.5 2 9 0"></path>
                        <path d="M4 6c1.5 1 4.5 1 6 0s4.5-1 6 0"></path>
                        <path d="M4 18c1.5-1 4.5-1 6 0s4.5 1 6 0"></path>
                    </svg>
                    <span class="tab-label">Wind</span>
                </button>
                <button class="tab_btn">
                    <svg class="tab-icon filled" viewBox="0 0 24 24" aria-hidden="true">
                        <rect x="3" y="3" width="7" height="7" rx="1.5"></rect>
                        <rect x="14" y="3" width="7" height="7" rx="1.5"></rect>
                        <rect x="3" y="14" width="7" height="7" rx="1.5"></rect>
                        <rect x="14" y="14" width="7" height="7" rx="1.5"></rect>
                    </svg>
                    <span class="tab-label">Categories</span>
                </button>
                <div class="line"></div>
                <button class="small-btn calculator-btn" id="calculator-btn" title="Open calculator" aria-label="Open calculator">
                    <svg fill="#000000" height="200px" width="200px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 196.973 196.973" xml:space="preserve" stroke="#000000"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M178.024,0.531h-51.983c-10.448,0-18.948,8.501-18.948,18.949v51.983c0,10.448,8.5,18.948,18.948,18.948h51.983 c10.448,0,18.948-8.5,18.948-18.948V19.48C196.973,9.032,188.473,0.531,178.024,0.531z M172.616,52.971h-41.167 c-4.142,0-7.5-3.357-7.5-7.5s3.358-7.5,7.5-7.5h41.167c4.142,0,7.5,3.357,7.5,7.5S176.758,52.971,172.616,52.971z M70.932,0.531 H18.948C8.5,0.531,0,9.032,0,19.48v51.983c0,10.448,8.5,18.948,18.948,18.948h51.983c10.448,0,18.948-8.5,18.948-18.948V19.48 C89.88,9.032,81.38,0.531,70.932,0.531z M65.785,52.971H52.701v13.083c0,4.143-3.358,7.5-7.5,7.5s-7.5-3.357-7.5-7.5V52.971H24.618 c-4.142,0-7.5-3.357-7.5-7.5s3.358-7.5,7.5-7.5h13.083V24.888c0-4.143,3.358-7.5,7.5-7.5s7.5,3.357,7.5,7.5v13.083h13.083 c4.142,0,7.5,3.357,7.5,7.5S69.927,52.971,65.785,52.971z M70.932,106.562H18.948C8.5,106.562,0,115.062,0,125.51v51.983 c0,10.448,8.5,18.948,18.948,18.948h51.983c10.448,0,18.948-8.5,18.948-18.948V125.51C89.88,115.062,81.38,106.562,70.932,106.562z M65.059,160.752c2.929,2.93,2.929,7.678,0,10.607c-1.464,1.464-3.384,2.196-5.303,2.196s-3.839-0.732-5.303-2.196l-9.251-9.251 l-9.251,9.251c-1.464,1.464-3.384,2.196-5.303,2.196s-3.839-0.732-5.303-2.196c-2.929-2.93-2.929-7.678,0-10.607l9.251-9.251 l-9.251-9.251c-2.929-2.93-2.929-7.678,0-10.607c2.929-2.928,7.678-2.928,10.606,0l9.251,9.251l9.251-9.251 c2.929-2.928,7.678-2.928,10.606,0c2.929,2.93,2.929,7.678,0,10.607l-9.251,9.251L65.059,160.752z M178.024,106.562h-51.983 c-10.448,0-18.948,8.5-18.948,18.948v51.983c0,10.448,8.5,18.948,18.948,18.948h51.983c10.448,0,18.948-8.5,18.948-18.948V125.51 C196.973,115.062,188.473,106.562,178.024,106.562z M152.033,121.751h1.167c4.142,0,7.5,3.357,7.5,7.5s-3.358,7.5-7.5,7.5h-1.167 c-4.142,0-7.5-3.357-7.5-7.5S147.891,121.751,152.033,121.751z M153.199,181.251h-1.167c-4.142,0-7.5-3.357-7.5-7.5 s3.358-7.5,7.5-7.5h1.167c4.142,0,7.5,3.357,7.5,7.5S157.341,181.251,153.199,181.251z M172.616,159.001h-41.167 c-4.142,0-7.5-3.357-7.5-7.5s3.358-7.5,7.5-7.5h41.167c4.142,0,7.5,3.357,7.5,7.5S176.758,159.001,172.616,159.001z"></path> </g>
                    </svg>
                </button>
                <div id="status-notification" class="status"></div>
            </div>
            <div class="form-header">
                <!-- <div id="status-notification" class="status"></div> -->
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
                    <svg id="theme-icon-sun" class="theme-icon sun hidden" viewBox="0 0 24 24" aria-hidden="true">
                        <circle cx="12" cy="12" r="4"></circle>
                        <line x1="12" y1="2" x2="12" y2="5"></line>
                        <line x1="12" y1="19" x2="12" y2="22"></line>
                        <line x1="4.22" y1="4.22" x2="6.34" y2="6.34"></line>
                        <line x1="17.66" y1="17.66" x2="19.78" y2="19.78"></line>
                        <line x1="2" y1="12" x2="5" y2="12"></line>
                        <line x1="19" y1="12" x2="22" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="6.34" y2="17.66"></line>
                        <line x1="17.66" y1="6.34" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg id="theme-icon-moon" class="theme-icon moon" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
                <div class="action_btn-box">
                    <!-- <button class="action_btn" id="preview-btn">Preview</button> -->
                    <button class="action_btn" id="generate-report-btn">Create Report</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="status_area">
            <div class="">
                <div class="status_heading_box">
                    <div class="status_heading">
                        <h3>Figures</h3>
                        <button class="small-btn" id="refresh-figures-btn">↻</button>
                        <button class="small-btn" id="select-inputs-dir-btn">✎</button>
                        <!-- <span id="figure-checking-status" style="font-size: 0.75rem; color: var(--text-secondary); margin-left: 0.5rem; display: none;">Checking...</span> -->
                    </div>
                    <button class="small-btn help-btn" id="add-figures-btn">?</button>
                </div>
                <div id="inputs-dir-display" class="status-summary">
                    <strong>Dir:</strong> <span id="inputs-dir-path-display">Default</span>
                </div>
                <div id="figure-status-summary" class="status-summary"></div>
            </div>
            <div class="status-box-container">
                <div class="status-box">
                    <ul id="figure-status-list">
                        <!-- Status items will be dynamically added here -->
                    </ul>
                </div>
            </div>
            
        </div>

        <div class="content__box">
            <div>
                <form id="yaml-form" onsubmit="event.preventDefault();">
                    <div class="content_box">
                        <div class="content active" data-tab="project_info">
                            <div class="form-header">
                                <h2 class="section-title">
                                    <svg class="section-icon" viewBox="0 0 24 24" aria-hidden="true">
                                        <rect x="6" y="5" width="12" height="16" rx="1.5"></rect>
                                        <path d="M9 5V3h6v2"></path>
                                        <line x1="9" y1="10" x2="15" y2="10"></line>
                                        <line x1="9" y1="14" x2="15" y2="14"></line>
                                    </svg>
                                    <span>Project Info</span>
                                </h2>
                            </div>
                            <div class="form-section">
                                <div class="form-field">
                                    <label for="project_info.ref_no">Ref. No.</label>
                                    <input type="text" id="project_info.ref_no" name="project_info.ref_no" value="RFA-001/REV-02/AEL/CW/2025">
                                </div>
                                <div class="form-field">
                                    <label for="project_info.project_name">Project Name</label>
                                    <input type="text" id="project_info.project_name" name="project_info.project_name">
                                </div>
                                <div class="form-field">
                                    <label for="project_info.project_client">Project Client</label>
                                    <input type="text" id="project_info.project_client" name="project_info.project_client">
                                </div>
                                <div class="form-field">
                                    <label for="project_info.rev_no">Revision No.</label>
                                    <input type="text" id="project_info.rev_no" name="project_info.rev_no" value="01">
                                </div>
                                <div class="form-field">
                                    <label for="project_info.date">Date</label>
                                    <input type="text" id="project_info.date" name="project_info.date" value="June 28, 2025">
                                </div>
                            </div>
                            
                            <div class="include-area">
                                <p class="include-heading">Include in Report?</p>
                                <div class="include-checkbox">
                                    <label class="checkbox-option" for="toc">
                                        <input type="checkbox" id="toc" name="include.toc" checked>
                                        <span>Table of Contents</span>
                                    </label>
                                    <label class="checkbox-option" for="intro">
                                        <input type="checkbox" id="intro" name="include.intro" checked>
                                        <span>Introduction</span>
                                    </label>
                                    <label class="checkbox-option" for="material-specs">
                                        <input type="checkbox" id="material-specs" name="include.material_specs" checked>
                                        <span>Material Specifications</span>
                                    </label>
                                    <label class="checkbox-option" for="design-consideration">
                                        <input type="checkbox" id="design-consideration" name="include.design_consideration" checked>
                                        <span>Design Consideration</span>
                                    </label>
                                    <label class="checkbox-option" for="idealization">
                                        <input type="checkbox" id="idealization" name="include.idealization" checked>
                                        <span>Indealization of Cross-section</span>
                                    </label>
                                    <label class="checkbox-option" for="theory">
                                        <input type="checkbox" id="theory" name="include.theory" checked>
                                        <span>Theoretical Background</span>
                                    </label>
                                    <label class="checkbox-option" for="moment-capacity">
                                        <input type="checkbox" id="moment-capacity" name="include.moment_capacity" checked>
                                        <span>Moment Capacity of Profiles</span>
                                    </label>
                                    <label class="checkbox-option" for="wind-pressure">
                                        <input type="checkbox" id="wind-pressure" name="include.wind_pressure" checked>
                                        <span>Wind Pressure</span>
                                    </label>
                                    <label class="checkbox-option" for="categories">
                                        <input type="checkbox" id="categories" name="include.categories" checked>
                                        <span>Categories</span>
                                    </label>
                                    <label class="checkbox-option" for="reference">
                                        <input type="checkbox" id="reference" name="include.reference" checked>
                                        <span>References</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="content" data-tab="profiles">
                            <h2 class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" aria-hidden="true">
                                    <line x1="5" y1="6" x2="19" y2="6"></line>
                                    <line x1="5" y1="18" x2="19" y2="18"></line>
                                    <line x1="12" y1="6" x2="12" y2="18"></line>
                                </svg>
                                <span>Profiles</span>
                            </h2>
                            <h3>Aluminum Profiles</h3>
                            <div class="category-dynamic-list" id="alum-profiles-list"></div>
                            <button type="button" class="add-btn" data-list="alum-profiles-list" data-template="alum-profile-template">Add Aluminum Profile</button>

                            <h3>Steel Profiles</h3>
                            <div class="category-dynamic-list" id="steel-profiles-list"></div>
                            <button type="button" class="add-btn" data-list="steel-profiles-list" data-template="steel-profile-template">Add Steel Profile</button>
                        </div>

                        <div class="content" data-tab="wind">
                            <h2 class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" aria-hidden="true">
                                    <path d="M4 12c2.5-2 6.5-2 9 0s6.5 2 9 0"></path>
                                    <path d="M4 6c1.5 1 4.5 1 6 0s4.5-1 6 0"></path>
                                    <path d="M4 18c1.5-1 4.5-1 6 0s4.5 1 6 0"></path>
                                </svg>
                                <span>Wind Parameters</span>
                            </h2>
                            <div class="form-section">
                                <div class="form-field">
                                    <label for="wind.location">Location</label>
                                    <input type="text" id="wind.location" name="wind.location" value="Dhaka">
                                </div>
                                <div class="form-field">
                                    <label for="wind.enclosure_type">Enclosure Type</label>
                                    <select id="wind.enclosure_type" name="wind.enclosure_type">
                                        <option value="Enclosed">Enclosed</option>
                                        <option value="Partially Enclosed">Partially Enclosed</option>
                                        <option value="Open">Open</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="wind.roof_type">Roof Type</label>
                                    <select id="wind.roof_type" name="wind.roof_type">
                                        <option value="Flat">Flat Roof</option>
                                        <option value="Monoslope">Monoslope Roof</option>
                                        <option value="Gable">Gable Roof</option>
                                        <option value="Hip">Hip Roof</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="wind.wind_speed">Wind Speed (m/s)</label>
                                    <input type="number" step="0.1" id="wind.wind_speed" name="wind.wind_speed" value="65.7">
                                </div>
                                <div class="form-field">
                                    <label for="wind.b_height">Building Height (m)</label>
                                    <input type="number" step="0.1" id="wind.b_height" name="wind.b_height">
                                </div>
                                <div class="form-field">
                                    <label for="wind.b_length">Building Length (m)</label>
                                    <input type="number" step="0.1" id="wind.b_length" name="wind.b_length">
                                </div>
                                <div class="form-field">
                                    <label for="wind.b_width">Building Width (m)</label>
                                    <input type="number" step="0.1" id="wind.b_width" name="wind.b_width">
                                </div>
                                <div class="form-field">
                                    <label for="wind.exposure_cat">Exposure Category</label>
                                    <select id="wind.exposure_cat" name="wind.exposure_cat">
                                        <option value="A">A</option>
                                        <option value="B">B</option>
                                        <option value="C">C</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="wind.occupancy_cat">Occupancy Category</label>
                                    <select id="wind.occupancy_cat" name="wind.occupancy_cat">
                                        <option value="I">Occupancy I</option>
                                        <option value="II">Occupancy II</option>
                                        <option value="III">Occupancy III</option>
                                        <option value="IV">Occupancy IV</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="wind.Imp_factor">Importance Factor</label>
                                    <select id="wind.Imp_factor" name="wind.Imp_factor">
                                        <option value="1.0">1.0</option>
                                        <option value="0.77">0.77</option>
                                        <option value="0.87">0.87</option>
                                        <option value="1.15">1.15</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="wind.K_d">Directionality Factor, Kd</label>
                                    <input type="number" step="0.1" id="wind.K_d" name="wind.K_d" value="0.85">
                                </div>
                                <div class="form-field">
                                    <label for="wind.GC_pi">Internal Pressure Coefficient, GCpi</label>
                                    <select id="wind.GC_pi" name="wind.GC_pi">
                                        <option value="0.18">0.18 (Enclosed)</option>
                                        <option value="0.55">0.55 (Partially Enclosed)</option>
                                        <option value="0">0.0 (Open)</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="wind.C_pl">External Leeward Pressure Coefficient, Cpl</label>
                                    <input type="number" step="0.1" id="wind.C_pl" name="wind.C_pl" value="0.5">
                                </div>
                                <div class="form-field">
                                    <label for="wind.q_zk">Velocity Pressure, qz</label>
                                    <input type="number" step="0.1" id="wind.q_zk" name="wind.q_zk">
                                </div>
                                <div class="form-field">
                                    <label for="wind.K_ht">Topographic Factor at H, Kht</label>
                                    <input type="number" step="0.1" id="wind.K_ht" name="wind.K_ht" value="1.0">
                                </div>
                                <div class="form-field">
                                    <label for="wind.b_rigidity">Building Rigidity</label>
                                    <select id="wind.b_rigidity" name="wind.b_rigidity">
                                        <option value="Rigid">Rigid</option>
                                        <option value="Flexible">Flexible</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="wind.b_freq">Building Natural Frequency, fn (Hz)</label>
                                    <input type="number" step="0.1" id="wind.b_freq" name="wind.b_freq">
                                </div>
                                <div class="form-field">
                                    <label for="wind.damping">Damping Ratio</label>
                                    <input type="number" step="0.1" id="wind.damping" name="wind.damping" value="0.02">
                                </div>
                                <div class="form-field">
                                    <label for="wind.gust_factor">Gust Effect Factor, G</label>
                                    <input type="number" step="0.1" id="wind.gust_factor" name="wind.gust_factor" value="0.85">
                                </div>
                                <div class="form-field">
                                    <label for="wind.topography_type">Topography Type</label>
                                    <select id="wind.topography_type" name="wind.topography_type">
                                        <option value="Homogeneous">Homogeneous</option>
                                        <option value="Hill">Hill</option>
                                        <option value="Ridge">Ridge</option>
                                        <option value="Escarpment">Escarpment</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="wind.topo_crest_side">Topography Crest Side</label>
                                    <input type="text" id="wind.topo_crest_side" name="wind.topo_crest_side">
                                </div>
                                <div class="form-field">
                                    <label for="wind.topo_height">Topography Height</label>
                                    <input type="number" id="wind.topo_height" name="wind.topo_height">
                                </div>
                                <div class="form-field">
                                    <label for="wind.topo_length">Topography Length</label>
                                    <input type="number" id="wind.topo_length" name="wind.topo_length">
                                </div>
                                <div class="form-field">
                                    <label for="wind.topo_distance">Topography Distance</label>
                                    <input type="number" id="wind.topo_distance" name="wind.topo_distance">
                                </div>
                                <div class="form-field">
                                    <label for="wind.exposure_note">Exposure Note</label>
                                    <textarea id="wind.exposure_note" name="wind.exposure_note"></textarea>
                                </div>
                                <div class="form-field">
                                    <label for="wind.occupancy_note">Occupancy Note</label>
                                    <textarea id="wind.occupancy_note" name="wind.occupancy_note">Likely to gather more than 300 people at the same time.</textarea>
                                </div>
                            </div>
                        </div>

                        <div class="content" data-tab="categories">
                            <h2 class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" aria-hidden="true">
                                    <rect x="3" y="3" width="7" height="7" rx="1.5"></rect>
                                    <rect x="14" y="3" width="7" height="7" rx="1.5"></rect>
                                    <rect x="3" y="14" width="7" height="7" rx="1.5"></rect>
                                    <rect x="14" y="14" width="7" height="7" rx="1.5"></rect>
                                </svg>
                                <span>Categories</span>
                            </h2>
                            <div class="category-dynamic-list" id="categories-list"></div>
                            <button type="button" class="add-btn add-category-btn" data-list="categories-list" data-template="category-template">Add Category</button>
                        </div>
                    </div>
                </form>

                <div class="output-container">
                    <h3>YAML Section</h3>
                    <div class="btn_yaml">
                        <button class="action_btn" id="load-yaml-btn">Load</button>
                        <button class="action_btn" id="generate-yaml-btn">Generate</button>
                        <button class="action_btn" id="download-yaml-btn">Download</button>
                        <input type="file" id="yaml-file-input" accept=".yaml,.yml,.json,text/yaml" hidden>
                    </div>
                    <pre id="yaml-output-display">Click 'Generate' to see the YAML output.</pre>
                </div>
            </div>

            <template id="alum-profile-template">
                <div class="dynamic-item profile-item alum-profile-item" data-type="alum_profile">
                    <div class="profile-container">
                        <div class="profile-input-section">
                            <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                            <div class="item-header">
                                <select name="profile_type">
                                    <option value="Pre-defined">Pre-defined</option>
                                    <option value="Stick">Stick Profile</option>
                                    <option value="Manual">Manual Input</option>
                                </select>
                            </div>
                            <details class="profile-details" open>
                                <summary class="profile-summary">Properties</summary>
                                <div class="item-fields"></div>
                            </details>
                        </div>
                        <div class="profile-preview-mini">
                            <h4>Preview</h4>
                            <div class="profile-preview-content">
                                <p class="preview-placeholder">Select a profile</p>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <template id="steel-profile-template">
                <div class="dynamic-item profile-item steel-profile-item" data-type="steel_profile">
                    <div class="profile-container">
                        <div class="profile-input-section">
                            <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                            <div class="item-header">
                                <div class="form-field">
                                    <label for="profile_name">Profile Name</label>
                                    <input type="text" id="profile_name" name="profile_name" value="RHS 85x50x2.5">
                                </div>
                            </div>
                            <details class="profile-details" open>
                                <summary class="profile-summary">Properties</summary>
                                <div class="item-fields form-section">
                                    <div class="form-field">
                                        <label for="web_length">Web Length (mm)</label>
                                        <input type="number" step="0.1" id="web_length" name="web_length" value="85">
                                    </div>
                                    <div class="form-field">
                                        <label for="flange_length">Flange Length (mm)</label>
                                        <input type="number" step="0.1" id="flange_length" name="flange_length" value="50">
                                    </div>
                                    <div class="form-field">
                                        <label for="thk">Thickness (mm)</label>
                                        <input type="number" step="0.1" id="thk" name="thk" value="2.5">
                                    </div>
                                </div>
                            </details>
                        </div>
                        <div class="profile-preview-mini">
                            <h4>Preview</h4>
                            <div class="profile-preview-content">
                                <p class="preview-placeholder">Enter profile details</p>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <template id="category-template">
                <div class="dynamic-item category-item" data-type="category">
                    <button type="button" class="remove-btn">Remove Category</button>
                    <div class="item-header">
                        <div class="form-field">
                            <!-- <label for="category_name">Category Name</label> -->
                            <input type="text" id="category_name" name="category_name" placeholder="Category Name" value="Typ. Cont. Façade">
                        </div>
                    </div>

                    <details open>
                        <summary class="profile-summary">Glass Units</summary>
                        <div class="dynamic-list sub-list" data-list-name="glass_units"></div>
                        <button type="button" class="add-btn sub-add-btn" data-template="glass-unit-template" data-sub-list-name="glass_units">Add Glass Unit</button>
                    </details>

                    <details open>
                        <summary class="profile-summary">Frame</summary>
                        <div class="dynamic-list sub-list" data-list-name="frames"></div>
                        <button type="button" class="add-btn sub-add-btn" data-template="frame-template" data-sub-list-name="frames">Add Frame</button>
                    </details>

                    <details open>
                        <summary class="profile-summary">Connection</summary>
                        <div class="dynamic-list sub-list" data-list-name="connections"></div>
                        <button type="button" class="add-btn sub-add-btn" data-template="connection-template" data-sub-list-name="connections">Add Connection</button>
                    </details>

                    <details open>
                        <summary class="profile-summary">Anchorage</summary>
                        <div class="dynamic-list sub-list" data-list-name="anchorage"></div>
                        <button type="button" class="add-btn sub-add-btn" data-template="anchorage-template" data-sub-list-name="anchorage">Add Anchorage</button>
                    </details>
                </div>
            </template>

            <template id="glass-unit-template">
                <div class="dynamic-item sub-item glass-unit-item" data-type="glass_unit">
                    <div class="sub-item-container">
                        <div class="sub-item-input-section">
                            <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                            <div class="item-header">
                                <div class="form-field">
                                    <label for="glass_type">Glass Type</label>
                                    <select id="glass_type" name="glass_type">
                                        <option value="sgu">SGU (Single Glazed)</option>
                                        <option value="dgu">DGU (Double Glazed)</option>
                                        <option value="lgu">LGU (Laminated Glazed)</option>
                                        <option value="ldgu">LDGU (Laminated DGU)</option>
                                    </select>
                                </div>
                            </div>
                            <div class="item-fields"></div>
                        </div>
                        <div class="sub-item-preview-mini">
                            <h5>Design Summary</h5>
                            <div class="sub-item-preview-content">
                                <p class="preview-placeholder">Select glass type</p>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <template id="frame-template">
                <div class="dynamic-item sub-item frame-item" data-type="frame">
                    <div class="sub-item-container">
                        <div class="sub-item-input-section">
                            <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                            <div class="item-header form-section">
                                <div class="form-field">
                                    <label for="geometry">Geometry</label>
                                    <select id="geometry" name="geometry">
                                        <option value="regular">Regular (Auto Calc.)</option>
                                        <option value="irregular">Irregular (Manual Calc.)</option>
                                    </select>
                                </div>
                            </div> 
                            <div class="item-header form-section">
                                <div class="form-field">
                                    <label for="mullion_type">Mullion Type</label>
                                    <select id="mullion_type" name="mullion_type">
                                        <option value="Aluminum Only">Aluminum Only</option>
                                        <option value="Aluminum + Steel">Aluminum + Steel</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="frame_type">Frame Type</label>
                                    <select id="frame_type" name="frame_type">
                                        <option value="Continuous">Continuous</option>
                                        <option value="Floor-to-floor">Floor-to-floor</option>
                                    </select>
                                </div>
                            </div>
                            <div class="item-header form-section">
                                <div class="form-field">
                                    <label for="zone">Zone</label>
                                    <select id="zone" name="zone">
                                        <option value="Zone 4 (Mid Zone)">Zone 4 (Mid Zone)</option>
                                        <option value="Zone 5 (Edge/Corner Zone)">Zone 5 (Edge/Corner Zone)</option>
                                        <option value="Zone 1 (Roof Mid Zone)">Zone 1 (Roof Mid Zone)</option>
                                        <option value="Zone 2 (Roof Edge Zone)">Zone 2 (Roof Edge Zone)</option>
                                        <option value="Zone 3 (Roof Corner Zone)">Zone 3 (Roof Corner Zone)</option>
                                    </select>
                                </div>
                                <div class="form-field">
                                    <label for="system_type">System Type</label>
                                    <select id="system_type" name="system_type">
                                        <option value="Semi-unitized">Semi-unitized System</option>
                                        <option value="Unitized">Unitized System</option>
                                        <option value="Stick">Stick System</option>
                                    </select>
                                </div>
                            </div>
                            <div class="item-fields"></div>
                        </div>
                        <div class="sub-item-preview-mini">
                            <h5>Design Summary</h5>
                            <div class="sub-item-preview-content">
                                <p class="preview-placeholder">Enter frame details</p>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <template id="connection-template">
                <div class="dynamic-item sub-item connection-item" data-type="connection">
                    <div class="sub-item-container">
                        <div class="sub-item-input-section">
                            <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                            <div class="item-header">
                                <div class="form-field">
                                    <label for="screw_nos">No. of Screws</label>
                                    <input type="number" step="2" id="screw_nos" name="screw_nos" value="4">
                                </div>
                            </div>
                            <div class="item-fields form-section">
                                <div class="form-field">
                                    <label for="screw_dia">Screw Diameter, d (mm)</label>
                                    <input type="number" step="0.1" id="screw_dia" name="screw_dia" value="4.8">
                                </div>
                                <div class="form-field">
                                    <label for="cleat_size">Cleat Size</label>
                                    <input type="text" id="cleat_size" name="cleat_size" value="25 x 32 x 3.5 (L = 85)">
                                </div>
                                <div class="form-field">
                                    <label for="head_dia">Screw Head Diameter, d<sub>h</sub> (mm)</label>
                                    <input type="number" step="0.1" id="head_dia" name="head_dia" value="10.5">
                                </div>
                                <div class="form-field">
                                    <label for="t1">Thickness t<sub>1</sub> (mm)</label>
                                    <input type="number" step="0.1" id="t1" name="t1" value="3.5">
                                </div>
                                <div class="form-field">
                                    <label for="t2">Thickness t<sub>2</sub> (mm)</label>
                                    <input type="number" step="0.1" id="t2" name="t2" value="2.5">
                                </div>
                                <div class="form-field">
                                    <label for="tc">Depth of Penetration, t<sub>c</sub> (mm)</label>
                                    <input type="number" step="0.1" id="tc" name="tc" value="2.5">
                                </div>
                            </div>
                        </div>
                        <div class="sub-item-preview-mini">
                            <h5>Design Summary</h5>
                            <div class="sub-item-preview-content">
                                <p class="preview-placeholder">Enter connection details</p>
                            </div>
                        </div>
                    </div>
                </div>
            </template>

            <template id="anchorage-template">
                <div class="dynamic-item sub-item anchorage-item" data-type="anchorage">
                    <div class="sub-item-container">
                        <div class="sub-item-input-section">
                            <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                            <div class="item-header">
                                <div class="form-field">
                                    <label for="clump_type">Clump Type</label>
                                    <select id="clump_type" name="clump_type">
                                        <option value="Box Clump">Box Clump</option>
                                        <option value="U Clump">U Clump</option>
                                        <option value="L Clump">L Clump</option>
                                    </select>
                                </div>
                            </div>
                            <div class="item-fields"></div>
                        </div>
                        <div class="sub-item-preview-mini">
                            <h5>Design Summary</h5>
                            <div class="sub-item-preview-content">
                                <p class="preview-placeholder">Select clump type</p>
                            </div>
                        </div>
                    </div>
                </div>
            </template>
        </div>
    </div>

    <!-- Input Helper Guide Popup -->
    <div id="input-helper-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Input Guide</h3>
                <span class="close-modal" id="close-input-helper">&times;</span>
            </div>
            <div class="modal-body">
                <div id="input-helper-content">Loading...</div>
            </div>
        </div>
    </div>
    
    <!-- Preview Popup -->
    <div id="preview-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Calculation Preview</h3>
                <span class="close-modal" id="close-preview">&times;</span>
            </div>
            <div class="modal-body">
                <div id="preview-content">Loading...</div>
            </div>
        </div>
    </div>

    <!-- Calculator Popup -->
    <div id="calculator-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="calculator-title">
        <div class="modal-content-calculator">
            <div class="modal-header-calculator">
                <h3 id="calculator-title">Calculator</h3>
                <span class="close-modal" id="close-calculator">&times;</span>
            </div>
            <div class="modal-body-calculator">
                <div class="calculator">
                    <div class="calc-display" id="calc-display" aria-live="polite">0</div>
                    <div class="calc-keys" id="calc-keys">
                        <button type="button" class="calc-key key-ac" data-key="AC">AC</button>
                        <button type="button" class="calc-key key-del" data-key="DEL">DEL</button>
                        <button type="button" class="calc-key key-op" data-key="(">(</button>
                        <button type="button" class="calc-key key-op" data-key=")">)</button>

                        <button type="button" class="calc-key" data-key="7">7</button>
                        <button type="button" class="calc-key" data-key="8">8</button>
                        <button type="button" class="calc-key" data-key="9">9</button>
                        <button type="button" class="calc-key key-op" data-key="÷">÷</button>

                        <button type="button" class="calc-key" data-key="4">4</button>
                        <button type="button" class="calc-key" data-key="5">5</button>
                        <button type="button" class="calc-key" data-key="6">6</button>
                        <button type="button" class="calc-key key-op" data-key="×">×</button>

                        <button type="button" class="calc-key" data-key="1">1</button>
                        <button type="button" class="calc-key" data-key="2">2</button>
                        <button type="button" class="calc-key" data-key="3">3</button>
                        <button type="button" class="calc-key key-op" data-key="-">-</button>

                        <button type="button" class="calc-key" data-key="0">0</button>
                        <button type="button" class="calc-key" data-key=".">.</button>
                        <button type="button" class="calc-key key-eq" data-key="=">=</button>
                        <button type="button" class="calc-key key-op" data-key="+">+</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4/dist/js-yaml.min.js"></script>
    <!-- <script src="/static/app.js"></script> -->
    <script src="{{ url_for('static', filename='app.js') }}"></script>
    <script src="{{ url_for('static', filename='calculator.js') }}"></script>

</body>

</html>