<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Report Generator</title>
    <link rel="icon" href="{{ url_for('static', filename='fav.png') }}" type="image/png">
    <!-- <link rel="stylesheet" href="/static/app.css"> -->
    <link rel="stylesheet" href="{{ url_for('static', filename='app.css') }}">
</head>

<body>
    <nav>
        <div class="nav_bar">
            <div class="tab_box">
                <button class="tab_btn active">
                    <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <circle cx="12" cy="12" r="9"></circle>
                        <line x1="12" y1="8" x2="12" y2="12"></line>
                        <circle cx="12" cy="16" r="1.2"></circle>
                    </svg>
                    <span class="tab-label">General</span>
                </button>
                <button class="tab_btn">
                    <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <line x1="5" y1="6" x2="19" y2="6"></line>
                        <line x1="5" y1="18" x2="19" y2="18"></line>
                        <line x1="12" y1="6" x2="12" y2="18"></line>
                    </svg>
                    <span class="tab-label">Profiles</span>
                </button>
                <button class="tab_btn">
                    <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M4 12c2.5-2 6.5-2 9 0s6.5 2 9 0"></path>
                        <path d="M4 6c1.5 1 4.5 1 6 0s4.5-1 6 0"></path>
                        <path d="M4 18c1.5-1 4.5-1 6 0s4.5 1 6 0"></path>
                    </svg>
                    <span class="tab-label">Wind</span>
                </button>
                <button class="tab_btn">
                    <svg class="tab-icon filled" viewBox="0 0 24 24" aria-hidden="true">
                        <rect x="3" y="3" width="7" height="7" rx="1.5"></rect>
                        <rect x="14" y="3" width="7" height="7" rx="1.5"></rect>
                        <rect x="3" y="14" width="7" height="7" rx="1.5"></rect>
                        <rect x="14" y="14" width="7" height="7" rx="1.5"></rect>
                    </svg>
                    <span class="tab-label">Categories</span>
                </button>
                <div class="line"></div>
                <button class="small-btn" id="calculator-btn" title="Open calculator" aria-label="Open calculator">
                    <svg class="tab-icon" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22ZM8.75 6.49998C8.75 6.08576 8.41421 5.74998 8 5.74998C7.58579 5.74998 7.25 6.08576 7.25 6.49998L7.25 7.74999H6C5.58579 7.74999 5.25 8.08578 5.25 8.49999C5.25 8.91421 5.58579 9.24999 6 9.24999L7.25 9.24999V10.5C7.25 10.9142 7.58579 11.25 8 11.25C8.41421 11.25 8.75 10.9142 8.75 10.5V9.24999H10C10.4142 9.24999 10.75 8.91421 10.75 8.49999C10.75 8.08578 10.4142 7.74999 10 7.74999H8.75L8.75 6.49998ZM14 7.74998C13.5858 7.74998 13.25 8.08576 13.25 8.49998C13.25 8.91419 13.5858 9.24998 14 9.24998H18C18.4142 9.24998 18.75 8.91419 18.75 8.49998C18.75 8.08576 18.4142 7.74998 18 7.74998H14ZM14 13.75C13.5858 13.75 13.25 14.0858 13.25 14.5C13.25 14.9142 13.5858 15.25 14 15.25H18C18.4142 15.25 18.75 14.9142 18.75 14.5C18.75 14.0858 18.4142 13.75 18 13.75H14ZM7.03033 13.9697C6.73744 13.6768 6.26256 13.6768 5.96967 13.9697C5.67678 14.2626 5.67678 14.7374 5.96967 15.0303L6.93935 16L5.96968 16.9697C5.67679 17.2626 5.67679 17.7374 5.96968 18.0303C6.26258 18.3232 6.73745 18.3232 7.03034 18.0303L8.00001 17.0607L8.96966 18.0303C9.26255 18.3232 9.73742 18.3232 10.0303 18.0303C10.3232 17.7374 10.3232 17.2626 10.0303 16.9697L9.06067 16L10.0303 15.0303C10.3232 14.7374 10.3232 14.2626 10.0303 13.9697C9.73744 13.6768 9.26256 13.6768 8.96967 13.9697L8.00001 14.9393L7.03033 13.9697ZM14 16.75C13.5858 16.75 13.25 17.0858 13.25 17.5C13.25 17.9142 13.5858 18.25 14 18.25H18C18.4142 18.25 18.75 17.9142 18.75 17.5C18.75 17.0858 18.4142 16.75 18 16.75H14Z" fill="currentColor"/>
                    </svg>
                </button>
                <div id="status-notification" class="status"></div>
            </div>
            <div class="form-header">
                <!-- <div id="status-notification" class="status"></div> -->
                <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
                    <svg id="theme-icon-sun" class="theme-icon sun hidden" viewBox="0 0 24 24" aria-hidden="true">
                        <circle cx="12" cy="12" r="4"></circle>
                        <line x1="12" y1="2" x2="12" y2="5"></line>
                        <line x1="12" y1="19" x2="12" y2="22"></line>
                        <line x1="4.22" y1="4.22" x2="6.34" y2="6.34"></line>
                        <line x1="17.66" y1="17.66" x2="19.78" y2="19.78"></line>
                        <line x1="2" y1="12" x2="5" y2="12"></line>
                        <line x1="19" y1="12" x2="22" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="6.34" y2="17.66"></line>
                        <line x1="17.66" y1="6.34" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg id="theme-icon-moon" class="theme-icon moon" viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
                <div class="action_btn-box">
                    <button class="action_btn" id="preview-btn">Preview</button>
                    <button class="action_btn" id="generate-report-btn">Create Report</button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="content__box">
            <div>
                <form id="yaml-form" onsubmit="event.preventDefault();">
                    <div class="content_box">
                        <div class="content active" data-tab="project_info">
                            <div class="form-header">
                                <h2 class="section-title">
                                    <svg class="section-icon" viewBox="0 0 24 24" aria-hidden="true">
                                        <rect x="6" y="5" width="12" height="16" rx="1.5"></rect>
                                        <path d="M9 5V3h6v2"></path>
                                        <line x1="9" y1="10" x2="15" y2="10"></line>
                                        <line x1="9" y1="14" x2="15" y2="14"></line>
                                    </svg>
                                    <span>Project Info</span>
                                </h2>
                            </div>
                            <div class="form-section">
                                <input type="text" name="project_info.ref_no" placeholder="Ref. No. (RFA-001/REV-02/AEL/CW/2025)" value="RFA-001/REV-02/AEL/CW/2025">
                                <input type="text" name="project_info.project_name" placeholder="Project Name">
                                <input type="text" name="project_info.project_client" placeholder="Project Client">
                                <input type="text" name="project_info.rev_no" placeholder="Revision No." value="01">
                                <input type="text" name="project_info.date" placeholder="Date (June 28, 2025)" value="June 28, 2025">
                            </div>
                            
                            <div class="include-area">
                                <p class="include-heading">Include in Report?</p>
                                <div class="include-checkbox">
                                    <label class="checkbox-option" for="toc">
                                        <input type="checkbox" id="toc" name="include.toc" checked>
                                        <span>Table of Contents</span>
                                    </label>
                                    <label class="checkbox-option" for="intro">
                                        <input type="checkbox" id="intro" name="include.intro" checked>
                                        <span>Introduction</span>
                                    </label>
                                    <label class="checkbox-option" for="material-specs">
                                        <input type="checkbox" id="material-specs" name="include.material_specs" checked>
                                        <span>Material Specifications</span>
                                    </label>
                                    <label class="checkbox-option" for="design-consideration">
                                        <input type="checkbox" id="design-consideration" name="include.design_consideration" checked>
                                        <span>Design Consideration</span>
                                    </label>
                                    <label class="checkbox-option" for="idealization">
                                        <input type="checkbox" id="idealization" name="include.idealization" checked>
                                        <span>Indealization of Cross-section</span>
                                    </label>
                                    <label class="checkbox-option" for="theory">
                                        <input type="checkbox" id="theory" name="include.theory" checked>
                                        <span>Theoretical Background</span>
                                    </label>
                                    <label class="checkbox-option" for="moment-capacity">
                                        <input type="checkbox" id="moment-capacity" name="include.moment_capacity" checked>
                                        <span>Moment Capacity of Profiles</span>
                                    </label>
                                    <label class="checkbox-option" for="wind-pressure">
                                        <input type="checkbox" id="wind-pressure" name="include.wind_pressure" checked>
                                        <span>Wind Pressure</span>
                                    </label>
                                    <label class="checkbox-option" for="categories">
                                        <input type="checkbox" id="categories" name="include.categories" checked>
                                        <span>Categories</span>
                                    </label>
                                    <label class="checkbox-option" for="reference">
                                        <input type="checkbox" id="reference" name="include.reference" checked>
                                        <span>References</span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="content" data-tab="profiles">
                            <h2 class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" aria-hidden="true">
                                    <line x1="5" y1="6" x2="19" y2="6"></line>
                                    <line x1="5" y1="18" x2="19" y2="18"></line>
                                    <line x1="12" y1="6" x2="12" y2="18"></line>
                                </svg>
                                <span>Profiles</span>
                            </h2>
                            <h3>Aluminum Profiles</h3>
                            <div class="category-dynamic-list" id="alum-profiles-list"></div>
                            <button type="button" class="add-btn" data-list="alum-profiles-list" data-template="alum-profile-template">Add Aluminum Profile</button>

                            <h3>Steel Profiles</h3>
                            <div class="category-dynamic-list" id="steel-profiles-list"></div>
                            <button type="button" class="add-btn" data-list="steel-profiles-list" data-template="steel-profile-template">Add Steel Profile</button>
                        </div>

                        <div class="content" data-tab="wind">
                            <h2 class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" aria-hidden="true">
                                    <path d="M4 12c2.5-2 6.5-2 9 0s6.5 2 9 0"></path>
                                    <path d="M4 6c1.5 1 4.5 1 6 0s4.5-1 6 0"></path>
                                    <path d="M4 18c1.5-1 4.5-1 6 0s4.5 1 6 0"></path>
                                </svg>
                                <span>Wind Parameters</span>
                            </h2>
                            <div class="form-section">
                                <input type="text" name="wind.location" placeholder="Location" value="Dhaka">
                                <select name="wind.enclosure_type">
                                    <option value="Enclosed">Enclosed</option>
                                    <option value="Partially Enclosed">Partially Enclosed</option>
                                    <option value="Open">Open</option>
                                </select>
                                <select name="wind.roof_type">
                                    <option value="Flat">Flat Roof</option>
                                    <option value="Monoslope">Monoslope Roof</option>
                                    <option value="Gable">Gable Roof</option>
                                    <option value="Hip">Hip Roof</option>
                                </select>
                                <input type="number" step="0.1" name="wind.wind_speed" placeholder="Wind Speed (m/s)" value="65.7">
                                <input type="number" step="0.1" name="wind.b_height" placeholder="Building Height (m)">
                                <input type="number" step="0.1" name="wind.b_length" placeholder="Building Length (m)">
                                <input type="number" step="0.1" name="wind.b_width" placeholder="Building Width (m)">
                                <select name="wind.exposure_cat">
                                    <option value="A">Exposure A</option>
                                    <option value="B">Exposure B</option>
                                    <option value="C">Exposure C</option>
                                </select>
                                <select name="wind.occupancy_cat">
                                    <option value="I">Occupancy I</option>
                                    <option value="II">Occupancy II</option>
                                    <option value="III">Occupancy III</option>
                                    <option value="IV">Occupancy IV</option>
                                </select>
                                <select name="wind.Imp_factor">
                                    <option value="1.0">I = 1.0</option>
                                    <option value="0.77">I = 0.77</option>
                                    <option value="0.87">I = 0.87</option>
                                    <option value="1.15">I = 1.15</option>
                                </select>
                                <input type="number" step="0.1" name="wind.K_d" placeholder="Directionality Factor, Kd" value="0.85">
                                <select name="wind.GC_pi">
                                    <option value="0.18">GCpi 0.18 (Enclosed)</option>
                                    <option value="0.55">GCpi 0.55 (Partially Enclosed)</option>
                                    <option value="0">GCpi 0.0 (Open)</option>
                                </select>
                                <input type="number" step="0.1" name="wind.C_pl" placeholder="External Leeward Pressure Coefficient, Cpl" value="0.5">
                                <input type="number" step="0.1" name="wind.q_zk" placeholder="Velocity Pressure (in terms of Kz.Kzt), qz">
                                <input type="number" step="0.1" name="wind.K_ht" placeholder="Topographic Factor at H, Kht" value="1.0">
                                <select name="wind.b_rigidity">
                                    <option value="Rigid">Rigid</option>
                                    <option value="Flexible">Flexible</option>
                                </select>
                                <input type="number" step="0.1" name="wind.b_freq" placeholder="Building Natural Frequency, fn (Hz)">
                                <input type="number" step="0.1" name="wind.damping" placeholder="Damping Ratio" value="0.02">
                                <input type="number" step="0.1" name="wind.gust_factor" placeholder="Gust Effect Factor, G" value="0.85">
                                <select name="wind.topography_type">
                                    <option value="Homogeneous">Homogeneous Topo.</option>
                                    <option value="Hill">Hill Topo.</option>
                                    <option value="Ridge">Ridge Topo.</option>
                                    <option value="Escarpment">Escarpment Topo.</option>
                                </select>
                                <input type="text" name="wind.topo_crest_side" placeholder="Topo Crest Side">
                                <input type="number" name="wind.topo_height" placeholder="Topo Height">
                                <input type="number" name="wind.topo_length" placeholder="Topo Length">
                                <input type="number" name="wind.topo_distance" placeholder="Topo Distance">
                                <textarea name="wind.exposure_note" placeholder="Exposure Note"></textarea>
                                <textarea name="wind.occupancy_note" placeholder="Occupancy Note">Likely to gather more than 300 people at the same time.</textarea>
                            </div>
                        </div>

                        <div class="content" data-tab="categories">
                            <h2 class="section-title">
                                <svg class="section-icon" viewBox="0 0 24 24" aria-hidden="true">
                                    <rect x="3" y="3" width="7" height="7" rx="1.5"></rect>
                                    <rect x="14" y="3" width="7" height="7" rx="1.5"></rect>
                                    <rect x="3" y="14" width="7" height="7" rx="1.5"></rect>
                                    <rect x="14" y="14" width="7" height="7" rx="1.5"></rect>
                                </svg>
                                <span>Categories</span>
                            </h2>
                            <div class="category-dynamic-list" id="categories-list"></div>
                            <button type="button" class="add-btn add-category-btn" data-list="categories-list" data-template="category-template">Add Category</button>
                        </div>
                    </div>
                </form>

                <div class="output-container">
                    <h3>YAML Section</h3>
                    <div class="btn_yaml">
                        <button class="action_btn" id="load-yaml-btn">Load</button>
                        <button class="action_btn" id="generate-yaml-btn">Generate</button>
                        <button class="action_btn" id="download-yaml-btn">Download</button>
                        <input type="file" id="yaml-file-input" accept=".yaml,.yml,.json,text/yaml" hidden>
                    </div>
                    <pre id="yaml-output-display">Click 'Generate' to see the YAML output.</pre>
                </div>
            </div>

            <template id="alum-profile-template">
                <div class="dynamic-item profile-item alum-profile-item" data-type="alum_profile">
                    <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                    <div class="item-header">
                        <select name="profile_type">
                            <option value="Pre-defined">Pre-defined</option>
                            <option value="Stick">Stick Profile</option>
                            <option value="Manual">Manual Input</option>
                        </select>
                    </div>
                    <details class="profile-details" open>
                        <summary class="profile-summary">Properties</summary>
                        <div class="item-fields"></div>
                    </details>
                </div>
            </template>

            <template id="steel-profile-template">
                <div class="dynamic-item profile-item steel-profile-item" data-type="steel_profile">
                    <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                    <div class="item-header">
                        <input type="text" name="profile_name" placeholder="Profile Name (e.g., RHS 110x54x2.5)" value="RHS 85x50x2.5">
                    </div>
                    <details class="profile-details" open>
                        <summary class="profile-summary">Properties</summary>
                        <div class="item-fields">
                            <input type="number" step="0.1" name="web_length" placeholder="Web Length (mm)" value="85">
                            <input type="number" step="0.1" name="flange_length" placeholder="Flange Length (mm)" value="50">
                            <input type="number" step="0.1" name="thk" placeholder="Thickness (mm)" value="2.5">
                        </div>
                    </details>
                </div>
            </template>

            <template id="category-template">
                <div class="dynamic-item category-item" data-type="category">
                    <button type="button" class="remove-btn">Remove Category</button>
                    <div class="item-header">
                        <input type="text" name="category_name" placeholder="Category Name (e.g., Typ. Cont. Façade)" value="Typ. Cont. Façade">
                    </div>

                    <details open>
                        <summary class="profile-summary">Glass Units</summary>
                        <div class="dynamic-list sub-list" data-list-name="glass_units"></div>
                        <button type="button" class="add-btn sub-add-btn" data-template="glass-unit-template" data-sub-list-name="glass_units">Add Glass Unit</button>
                    </details>

                    <details open>
                        <summary class="profile-summary">Frame</summary>
                        <div class="dynamic-list sub-list" data-list-name="frames"></div>
                        <button type="button" class="add-btn sub-add-btn" data-template="frame-template" data-sub-list-name="frames">Add Frame</button>
                    </details>

                    <details open>
                        <summary class="profile-summary">Connection</summary>
                        <div class="dynamic-list sub-list" data-list-name="connections"></div>
                        <button type="button" class="add-btn sub-add-btn" data-template="connection-template" data-sub-list-name="connections">Add Connection</button>
                    </details>

                    <details open>
                        <summary class="profile-summary">Anchorage</summary>
                        <div class="dynamic-list sub-list" data-list-name="anchorage"></div>
                        <button type="button" class="add-btn sub-add-btn" data-template="anchorage-template" data-sub-list-name="anchorage">Add Anchorage</button>
                    </details>
                </div>
            </template>

            <template id="glass-unit-template">
                <div class="dynamic-item sub-item glass-unit-item" data-type="glass_unit">
                    <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                    <div class="item-header">
                        <select name="glass_type">
                            <option value="sgu">SGU (Single Glazed)</option>
                            <option value="dgu">DGU (Double Glazed)</option>
                            <option value="lgu">LGU (Laminated Glazed)</option>
                            <option value="ldgu">LDGU (Laminated DGU)</option>
                        </select>
                    </div>
                    <div class="item-fields"></div>
                </div>
            </template>

            <template id="frame-template">
                <div class="dynamic-item sub-item frame-item" data-type="frame">
                    <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                    <div class="item-header">
                        <select name="mullion_type">
                            <option value="Aluminum Only">Aluminum Only</option>
                            <option value="Aluminum + Steel">Aluminum + Steel</option>
                        </select>
                    </div>
                    <div class="item-header">
                        <select name="frame_type">
                            <option value="Continuous">Continuous</option>
                            <option value="Floor-to-floor">Floor-to-floor</option>
                        </select>
                        <select name="zone">
                            <option value="Zone 4 (Mid Zone)">Zone 4 (Mid Zone)</option>
                            <option value="Zone 5 (Edge/Corner Zone)">Zone 5 (Edge/Corner Zone)</option>
                            <option value="Zone 1 (Roof Mid Zone)">Zone 1 (Roof Mid Zone)</option>
                            <option value="Zone 2 (Roof Edge Zone)">Zone 2 (Roof Edge Zone)</option>
                            <option value="Zone 3 (Roof Corner Zone)">Zone 3 (Roof Corner Zone)</option>
                        </select>
                        <select name="system_type">
                            <option value="Semi-unitized">Semi-unitized System</option>
                            <option value="Unitized">Unitized System</option>
                            <option value="Stick">Stick System</option>
                        </select>
                    </div>
                    <div class="item-fields"></div>
                </div>
            </template>

            <template id="connection-template">
                <div class="dynamic-item sub-item connection-item" data-type="connection">
                    <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                    <div class="item-header">
                        <input type="number" step="2" name="screw_nos" placeholder="No. of Screw (e.g. 4, 6, 8, 12)" value="4">
                    </div>
                    <div class="item-fields">
                        <input type="number" step="0.1" name="joint_fy" placeholder="Joint Horizontal Force, Fy (kN)">
                        <input type="number" step="0.1" name="joint_fz" placeholder="Joint Vertical Force, Fz (kN)">
                        <input type="text" name="cleat_size" placeholder="Cleat Size (e.g., 25 x 32 x 3.5 (L = 85))" value="25 x 32 x 3.5 (L = 85)">
                        <input type="number" step="0.1" name="screw_dia" placeholder="Diameter of Screw, d (mm)">
                        <input type="number" step="0.1" name="head_dia" placeholder="Diameter of Screw Head, dh (mm)" value="10.5">
                        <input type="number" step="0.1" name="t1" placeholder="Screw Head Contacted Member Thickness, t1 (mm)" value="3.5">
                        <input type="number" step="0.1" name="t2" placeholder="Screw Head Non-contacted Member Thickness, t2 (mm)" value="2.5">
                        <input type="number" step="0.1" name="tc" placeholder="Lesser of Depth of penetration and thickness t2, (tc, mm)" value="2.5">
                    </div>
                </div>
            </template>

            <template id="anchorage-template">
                <div class="dynamic-item sub-item anchorage-item" data-type="anchorage">
                    <button type="button" class="remove-btn sub-remove-btn">Remove</button>
                    <div class="item-header">
                        <select name="clump_type">
                            <option value="Box Clump">Box Clump</option>
                            <option value="U Clump">U Clump</option>
                            <option value="L Clump Top">L Clump Top (Part 1)</option>
                            <option value="L Clump Front">L Clump Front (Part 2)</option>
                        </select>
                    </div>
                    <div class="item-fields"></div>
                </div>
            </template>
        </div>

        <div class="status_area">
            <div class="">
                <div class="status_heading_box">
                    <div class="status_heading">
                        <h3>Figures</h3>
                        <button class="small-btn" id="refresh-figures-btn">↻</button>
                        <button class="small-btn" id="select-inputs-dir-btn">✎</button>
                        <!-- <span id="figure-checking-status" style="font-size: 0.75rem; color: var(--text-secondary); margin-left: 0.5rem; display: none;">Checking...</span> -->
                    </div>
                    <button class="small-btn help-btn" id="add-figures-btn">?</button>
                </div>
                <div id="inputs-dir-display" class="status-summary">
                    <strong>Dir:</strong> <span id="inputs-dir-path-display">Default</span>
                </div>
                <div id="figure-status-summary" class="status-summary"></div>
            </div>
            <div class="status-box-container">
                <div class="status-box">
                    <ul id="figure-status-list">
                        <!-- Status items will be dynamically added here -->
                    </ul>
                </div>
            </div>
            
        </div>
    </div>

    <!-- Input Helper Guide Popup -->
    <div id="input-helper-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Input Guide</h3>
                <span class="close-modal" id="close-input-helper">&times;</span>
            </div>
            <div class="modal-body">
                <div id="input-helper-content">Loading...</div>
            </div>
        </div>
    </div>
    
    <!-- Preview Popup -->
    <div id="preview-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Calculation Preview</h3>
                <span class="close-modal" id="close-preview">&times;</span>
            </div>
            <div class="modal-body">
                <div id="preview-content">Loading...</div>
            </div>
        </div>
    </div>

    <!-- Calculator Popup -->
    <div id="calculator-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="calculator-title">
        <div class="modal-content-calculator">
            <div class="modal-header-calculator">
                <h3 id="calculator-title">Calculator</h3>
                <span class="close-modal" id="close-calculator">&times;</span>
            </div>
            <div class="modal-body-calculator">
                <div class="calculator">
                    <div class="calc-display" id="calc-display" aria-live="polite">0</div>
                    <div class="calc-keys" id="calc-keys">
                        <button type="button" class="calc-key key-ac" data-key="AC">AC</button>
                        <button type="button" class="calc-key key-del" data-key="DEL">DEL</button>
                        <button type="button" class="calc-key key-op" data-key="(">(</button>
                        <button type="button" class="calc-key key-op" data-key=")">)</button>

                        <button type="button" class="calc-key" data-key="7">7</button>
                        <button type="button" class="calc-key" data-key="8">8</button>
                        <button type="button" class="calc-key" data-key="9">9</button>
                        <button type="button" class="calc-key key-op" data-key="÷">÷</button>

                        <button type="button" class="calc-key" data-key="4">4</button>
                        <button type="button" class="calc-key" data-key="5">5</button>
                        <button type="button" class="calc-key" data-key="6">6</button>
                        <button type="button" class="calc-key key-op" data-key="×">×</button>

                        <button type="button" class="calc-key" data-key="1">1</button>
                        <button type="button" class="calc-key" data-key="2">2</button>
                        <button type="button" class="calc-key" data-key="3">3</button>
                        <button type="button" class="calc-key key-op" data-key="-">-</button>

                        <button type="button" class="calc-key" data-key="0">0</button>
                        <button type="button" class="calc-key" data-key=".">.</button>
                        <button type="button" class="calc-key key-eq" data-key="=">=</button>
                        <button type="button" class="calc-key key-op" data-key="+">+</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    
    <script src="https://cdn.jsdelivr.net/npm/js-yaml@4/dist/js-yaml.min.js"></script>
    <!-- <script src="/static/app.js"></script> -->
    <script src="{{ url_for('static', filename='app.js') }}"></script>
    <script src="{{ url_for('static', filename='calculator.js') }}"></script>

</body>

</html>