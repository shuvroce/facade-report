{% if profile.profile_type == "Pre-defined" %}
    {% set target_name = profile.profile_name %}
    {% set ns = namespace(found_data=none) %}
    {% for data_row in alum_profiles_data %}
        {% if data_row.profile_name | trim == target_name | trim %}
            {% set ns.found_data = data_row %}
        {% endif %}
    {% endfor %}

    {% if ns.found_data is not none %}
        <div class="page__break"></div>
        <h2>{{ ns.found_data.profile_name }}</h2>
        <div>
            <div>
                <img src="assets/images/{{ ns.found_data.profile_name }}-wp.png" class="fig__130">
            </div>
            
            <table class="width__90">
                <caption>Section Properties</caption>
                <tbody>
                    <tr>
                        <td>Length of web</td>
                        <td>a</td>
                        <td>{{ ns.found_data.web_length }}</td>
                        <td><i>mm</i></td>
                    </tr>
                    <tr>
                        <td>Length of flange</td>
                        <td>b</td>
                        <td>{{ ns.found_data.flange_length }}</td>
                        <td><i>mm</i></td>
                    </tr>
                    <tr>
                        <td>Thickness of web</td>
                        <td>t<sub>1</sub></td>
                        <td>{{ ns.found_data.web_thk }}</td>
                        <td><i>mm</i></td>
                    </tr>
                    <tr>
                        <td>Thickness of flange (avg.)</td>
                        <td>t<sub>2</sub></td>
                        <td>{{ ns.found_data.flange_thk }}</td>
                        <td><i>mm</i></td>
                    </tr>
                    <tr>
                        <td>Torsional Constant</td>
                        <td><i>J<sub>y</sub></i></td>
                        <td>{{ ns.found_data.tor_constant }}</td>
                        <td><i>mm<sup>4</sup></i></td>
                    </tr>

                    <tr>
                        <td>Area of cross-section</td>
                        <td>A</td>
                        <td>{{ ns.found_data.area }}</td>
                        <td><i>mm<sup>2</sup></i></td>
                    </tr>
                    <tr>
                        <td>Moment of inertia about major axis</td>
                        <td>I<sub>x</sub></td>
                        <td>{{ ns.found_data.I_xx }}</td>
                        <td><i>mm<sup>4</sup></i></td>
                    </tr>
                    <tr>
                        <td>Moment of inertia about minor axis</td>
                        <td>I<sub>y</sub></td>
                        <td>{{ ns.found_data.I_yy }}</td>
                        <td><i>mm<sup>4</sup></i></td>
                    </tr>
                    <tr>
                        <td>Extreme fiber Distance from N.A (minor axis)</td>
                        <td>Y</td>
                        <td>{{ ns.found_data.Y }}</td>
                        <td><i>mm</i></td>
                    </tr>
                    <tr>
                        <td>Extreme fiber Distance from N.A (major axis)</td>
                        <td>X</td>
                        <td>{{ ns.found_data.X }}</td>
                        <td><i>mm</i></td>
                    </tr>
                    <tr>
                        <td>Elastic section modulus about major axis</td>
                        <td><i>S<sub>x</sub> = I<sub>x</sub> / Y</i></td>
                        <td>{{ (ns.found_data.I_xx / ns.found_data.Y) | round(1) }}</td>
                        <td><i>mm<sup>3</sup></i></td>
                    </tr>
                    <tr>
                        <td>Elastic section modulus about minor axis</td>
                        <td><i>S<sub>y</sub> = I<sub>y</sub> / X</i></td>
                        <td>{{ (ns.found_data.I_yy / ns.found_data.X) | round(1) }}</td>
                        <td><i>mm<sup>3</sup></i></td>
                    </tr>
                </tbody>
            </table>

            <table class="borderless width__100">
                <tbody>
                    <tr>
                        <td><img src="assets/images/{{ ns.found_data.profile_name }}p.png" class="fig__140"></td>
                    </tr>
                </tbody>
            </table>

            <table class="width__90">
                <tbody>
                    <tr>
                        <td>Lower region centroid distance from PNA</td>
                        <td>x</td>
                        <td>{{ ns.found_data.plastic_x }}</td>
                        <td><i>mm</i></td>
                    </tr>
                    <tr>
                        <td>Upper region centroid distance from PNA</td>
                        <td>y</td>
                        <td>{{ ns.found_data.plastic_y }}</td>
                        <td><i>mm</i></td>
                    </tr>
                    <tr>
                        <td>Plastic section modulus about major axis</td>
                        <td><i>Z<sub>x</sub> = 0.5 A(x + y)</i></td>
                        <td>{{ (0.5 * ns.found_data.area * (ns.found_data.plastic_x + ns.found_data.plastic_y)) | round(1) }}</td>
                        <td><i>mm<sup>3</sup></i></td>
                    </tr>

                    <tr>
                        <td>Yield strength of Aluminum</td>
                        <td>F<sub>y</sub></td>
                        <td>{{ ns.found_data.F_y }}</td>
                        <td><i>MPa</i></td>
                    </tr>
                    <tr>
                        <td>Modulus of elasticity of aluminum</td>
                        <td>E<sub>a</sub></td>
                        <td>70000</td>
                        <td><i>MPa</i></td>
                    </tr>
                </tbody>
            </table>


            <h3>Moment Capacity by Yielding</h3>
            <div>
                <table class="borderless ml-2">
                    <tbody>
                        <tr>
                            <td>Moment capacity, <i>M<sub>np</sub></i></td>
                            <td>=</td>
                            <td><i>min( ZF<sub>y</sub> , 1.5 F<sub>y</sub>S<sub>x</sub> )</i></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>=</td>
                            <td>{{ ns.found_data.Mn_yield }} <i>kN-m</i></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Moment Capacity by Local Buckling</h3>
            <div>
                <table class="borderless width__100 fig__table align__center">
                    <tbody>
                        <tr>
                            <td><img style="width: 50mm;" src="assets/images/{{ ns.found_data.profile_name }}-lb-web.png"></td>
                            <td><img style="width: 50mm;" src="assets/images/{{ ns.found_data.profile_name }}-lb-flange.png"></td>
                        </tr>
                    </tbody>
                </table>

                <table class="borderless width__100 fig__table">
                    <tbody>
                        <tr>
                            <td><img src="assets/images/{{ ns.found_data.profile_name }}-lb-table.png"></td>
                        </tr>
                    </tbody>
                </table>

                <p>The weighted average method is utilized to compute the nominal flexure strength due to the limit state of local buckling –</p>
                <p>For web elements under flexural compression –</p>
                <table class="borderless width__70 fig__table">
                    <tbody>
                        <tr>
                            <td><img src="assets/images/{{ ns.found_data.profile_name }}-lb-web-cap.png"></td>
                        </tr>
                    </tbody>
                </table>

                <p>For flange elements under uniform compression –</p>
                <table class="borderless width__100 fig__table">
                    <tbody>
                        <tr>
                            <td><img src="assets/images/{{ ns.found_data.profile_name }}-lb-flange-cap.png" class="fig__100"></td>
                        </tr>
                    </tbody>
                </table>

                <table class="borderless ml-2">
                    <tbody>
                        <tr>
                            <td>Total moment capacity, <i>M<sub>nlb</sub></i></td>
                            <td>=</td>
                            <td><i>M<sub>nlb,w</sub> + M<sub>nlb,f</sub></i></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td>=</td>
                            <td>{{ ns.found_data.Mn_lb }} <i>kN-m</i></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Moment Capacity by Lateral Torsional Buckling</h3>
            <div>
                <p>The member is considered to be continuously braced by the glass panel. Therefore, lateral torsional buckling (LTB) not governs.</p>
            </div>

            <div>
                <p>The nominal bending strength is the minimum value obtained considering the limit states of yielding, local buckling and lateral-torsional buckling. Therefore –</p>

                <table class="borderless ml-2">
                    <tbody>
                        <tr>
                            <td>Nominal Moment Capacity, <i>M<sub>n</sub> = min( M<sub>np</sub> , M<sub>nlb</sub> , M<sub>nmb</sub> )</i></td>
                            <td>=</td>
                            <td>{{ [ns.found_data.Mn_yield, ns.found_data.Mn_lb] | min }} <i>kN-m</i></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td>So, the design moment capacity, <i>φM<sub>n</sub> (; φ = 0.9)</i></td>
                            <td>=</td>
                            <td>{{ (([ns.found_data.Mn_yield, ns.found_data.Mn_lb] | min) * 0.9) | round(1) }} <i>kN-m</i></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    {% endif %}

{% else %}
    <div class="page__break"></div>
    <h2>{{ profile.profile_name }}</h2>
    <div>
        <div>
            <img src="assets/images/{{ profile.profile_name }}.png" class="fig__130">
        </div>
        
        <table class="width__90">
            <caption>Section Properties</caption>
            <tbody>
                <tr>
                    <td>Length of web</td>
                    <td>a</td>
                    <td>{{ profile.web_length }}</td>
                    <td><i>mm</i></td>
                </tr>
                <tr>
                    <td>Length of flange</td>
                    <td>b</td>
                    <td>{{ profile.flange_length }}</td>
                    <td><i>mm</i></td>
                </tr>
                <tr>
                    <td>Thickness of web</td>
                    <td>t<sub>1</sub></td>
                    <td>{{ profile.web_thk }}</td>
                    <td><i>mm</i></td>
                </tr>
                <tr>
                    <td>Thickness of flange (avg.)</td>
                    <td>t<sub>2</sub></td>
                    <td>{{ profile.flange_thk }}</td>
                    <td><i>mm</i></td>
                </tr>
                <tr>
                    <td>Torsional Constant</td>
                    <td>a</td>
                    <td>{{ profile.tor_constant }}</td>
                    <td><i>mm<sup>4</sup></i></td>
                </tr>

                <tr>
                    <td>Area of cross-section</td>
                    <td>A</td>
                    <td>{{ profile.area }}</td>
                    <td><i>mm<sup>2</sup></i></td>
                </tr>
                <tr>
                    <td>Moment of inertia about major axis</td>
                    <td>I<sub>x</sub></td>
                    <td>{{ profile.I_xx }}</td>
                    <td><i>mm<sup>4</sup></i></td>
                </tr>
                <tr>
                    <td>Moment of inertia about minor axis</td>
                    <td>I<sub>y</sub></td>
                    <td>{{ profile.I_yy }}</td>
                    <td><i>mm<sup>4</sup></i></td>
                </tr>
                <tr>
                    <td>Extreme fiber Distance from N.A (minor axis)</td>
                    <td>Y</td>
                    <td>{{ profile.Y }}</td>
                    <td><i>mm</i></td>
                </tr>
                <tr>
                    <td>Extreme fiber Distance from N.A (major axis)</td>
                    <td>X</td>
                    <td>{{ profile.X }}</td>
                    <td><i>mm</i></td>
                </tr>
                <tr>
                    <td>Elastic section modulus about major axis</td>
                    <td><i>S<sub>x</sub> = I<sub>x</sub> / Y</i></td>
                    <td>{{ (profile.I_xx / profile.Y) | round(1) }}</td>
                    <td><i>mm<sup>3</sup></i></td>
                </tr>
                <tr>
                    <td>Elastic section modulus about minor axis</td>
                    <td><i>S<sub>y</sub> = I<sub>y</sub> / X</i></td>
                    <td>{{ (profile.I_yy / profile.X) | round(1) }}</td>
                    <td><i>mm<sup>3</sup></i></td>
                </tr>
            </tbody>
        </table>

        <table class="borderless width__100">
            <tbody>
                <tr>
                    <td><img src="assets/images/{{ profile.profile_name }}p.png" class="fig__140"></td>
                </tr>
            </tbody>
        </table>

        <table class="width__90">
            <tbody>
                <tr>
                    <td>Lower region centroid distance from PNA</td>
                    <td>x</td>
                    <td>{{ profile.plastic_x }}</td>
                    <td><i>mm</i></td>
                </tr>
                <tr>
                    <td>Upper region centroid distance from PNA</td>
                    <td>y</td>
                    <td>{{ profile.plastic_y }}</td>
                    <td><i>mm</i></td>
                </tr>
                <tr>
                    <td>Plastic section modulus about major axis</td>
                    <td><i>Z<sub>x</sub> = 0.5 A(x + y)</i></td>
                    <td>{{ (0.5 * profile.area * (profile.plastic_x + profile.plastic_y)) | round(1) }}</td>
                    <td><i>mm<sup>3</sup></i></td>
                </tr>

                <tr>
                    <td>Yield strength of Aluminum</td>
                    <td>F<sub>y</sub></td>
                    <td>{{ profile.F_y }}</td>
                    <td><i>MPa</i></td>
                </tr>
                <tr>
                    <td>Modulus of elasticity of aluminum</td>
                    <td>E<sub>a</sub></td>
                    <td>70000</td>
                    <td><i>MPa</i></td>
                </tr>
            </tbody>
        </table>


        <h3>Moment Capacity by Yielding</h3>
        <div>
            <table class="borderless ml-2">
                <tbody>
                    <tr>
                        <td>Moment capacity, <i>M<sub>np</sub></i></td>
                        <td>=</td>
                        <td><i>min( ZF<sub>y</sub> , 1.5 F<sub>y</sub>S<sub>x</sub> )</i></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>=</td>
                        <td>{{ profile.Mn_yield }} <i>kN-m</i></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3>Moment Capacity by Local Buckling</h3>
        <div>
            <table class="borderless width__100 fig__table align__center">
                <tbody>
                    <tr>
                        <td><img style="width: 50mm;" src="assets/images/{{ profile.profile_name }}-lb-web.png"></td>
                        <td><img style="width: 50mm;" src="assets/images/{{ profile.profile_name }}-lb-flange.png"></td>
                    </tr>
                </tbody>
            </table>

            <table class="borderless width__100 fig__table">
                <tbody>
                    <tr>
                        <td><img src="assets/images/{{ profile.profile_name }}-lb-table.png"></td>
                    </tr>
                </tbody>
            </table>

            <p>The weighted average method is utilized to compute the nominal flexure strength due to the limit state of local buckling –</p>
            <p>For web elements under flexural compression –</p>
            <table class="borderless width__70 fig__table">
                <tbody>
                    <tr>
                        <td><img src="assets/images/{{ profile.profile_name }}-lb-web-cap.png"></td>
                    </tr>
                </tbody>
            </table>

            <p>For flange elements under uniform compression –</p>
            <table class="borderless width__100 fig__table">
                <tbody>
                    <tr>
                        <td><img src="assets/images/{{ profile.profile_name }}-lb-flange-cap.png" class="fig__100"></td>
                    </tr>
                </tbody>
            </table>

            <table class="borderless ml-2">
                <tbody>
                    <tr>
                        <td>Total moment capacity, <i>M<sub>nlb</sub></i></td>
                        <td>=</td>
                        <td><i>M<sub>nlb,w</sub> + M<sub>nlb,f</sub></i></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>=</td>
                        <td>{{ profile.Mn_lb }} <i>kN-m</i></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <h3>Moment Capacity by Lateral Torsional Buckling</h3>
        <div>
            <p>The member is considered to be continuously braced by the glass panel. Therefore, lateral torsional buckling (LTB) not governs.</p>
        </div>

        <div>
            <p>The nominal bending strength is the minimum value obtained considering the limit states of yielding, local buckling and lateral-torsional buckling. Therefore –</p>

            <table class="borderless ml-2">
                <tbody>
                    <tr>
                        <td>Nominal Moment Capacity, <i>M<sub>n</sub> = min( M<sub>np</sub> , M<sub>nlb</sub> , M<sub>nmb</sub> )</i></td>
                        <td>=</td>
                        <td>{{ [profile.Mn_yield, profile.Mn_lb] | min }} <i>kN-m</i></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>So, the design moment capacity, <i>φM<sub>n</sub> (; φ = 0.9)</i></td>
                        <td>=</td>
                        <td>{{ (([profile.Mn_yield, profile.Mn_lb] | min) * 0.9) | round(1) }} <i>kN-m</i></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
{% endif %}


